(function(){function A(a,b){for(var c=b?b:"",d="",e="",f=(a?a:16)-(b?b.length:0)||16;d.length<f;)e=Math.floor(2147483648*Math.random()^K.now()).toString(36).substring(1),"_"!=e&&(d+=e);return c+d}function t(a,b){var c=null,d=b?document.querySelector(a):document.querySelectorAll(a);if(d)if(u(d))c=k(d);else for(var c=[],e=0;e<d.length;e++)c.push(k(d[e]));return c}function k(a){var b=(m(a)?document.getElementById(a):a)||null;if(b&&u(b)){b.hasClass||(b.hasClass=function(a){var b=!0,c=this.className.split(" ");
a=a.split(" ");for(var g=0;g<a.length;g++)if(-1===c.indexOf(a[g])){b=!1;break}return b});b.addClass||(b.addClass=function(a){a=a.split(" ");var b=this.className.split(" ");a=a.concat(b);this.className=bj.unique(a).join(" ");return this});b.removeClass||(b.removeClass=function(a){var b=this.className.split(" ");a=a.split(" ");for(var c=0;c<a.length;c++)this.hasClass(a[c])&&b.splice(b.indexOf(a[c]),1);this.className=b.join(" ");return this});b.opacity||(b.opacity=function(a){this.style.opacity=a;if("string"!=
typeof this.style.opacity){this.style.MozOpacity=a;try{this.filters&&(this.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+100*a+")")}catch(b){}}return this});for(var c in B)(function(a){b[a]=function(c){l.listen(b,a,c)}})(B[c]);b.ignore=function(){l.ignore(b)};b.show=function(){this.style.display="block";this.style.visibility="visible";return this};b.hide=function(){this.style.display="none";this.style.visibility="hidden";return this};b.css=function(a){if(a){var b="width height top left right bottom font-size offsetTop offsetLeft offsetWidth offsetHeight".split(" "),
c=this.style,g;for(g in a)C(b,g)?c[g]=a[g]+"px":c[g]=a[g]}else return this.getAttribute("style");return this};b.bgpos=function(a,b){v(a)&&v(b)&&(this.style.backgroundPosition=w.round(a,3)+"px "+w.round(b,3)+"px")};b.bgimg=function(a){this.style.backgroundImage="url("+a+")"};b.getHTML=function(a){if(!a)return this.innerHTML;this.innerHTML=a};b.getText=function(a){if(!a)return this.innerText||this.textContent;this.innerText?this.innerText=a:this.textContent&&(this.textContent=a)};b.setSize=function(a,
b){var c=a||0;this.style.width=c+"px";this.style.height=(b||c)+"px"};b.setPosition=function(a,b){var c=a||0;this.style.top=c+"px";this.style.left=(b||c)+"px"};b.rotate=function(a){this.style.webkitTransform=this.style.MozTransform=this.style.OTransform=this.style.transform="rotate("+a+")"};b.getOffset=function(a){var b=this,c={left:0,top:0};a=a?k(a):document.body;var g=0;if(b.offsetParent){do{if(b==a)break;g=parseInt(document.defaultView.getComputedStyle(b,null).getPropertyValue("border-width"));
c.left+=b.offsetLeft+(0<g?g:0);c.top+=b.offsetTop+(0<g?g:0)}while(b=b.offsetParent)}return c};b.isAncestorOf=function(a){a=k(a);return a.isDescendantOf(b)};b.isOrAncestorOf=function(a){a=k(a);return a.isOrDescendantOf(b)};b.isDescendantOf=function(a){a=k(a);for(var c=b.parentNode;null!=c;){if(c==a)return!0;c=c.parentNode}return!1};b.isOrDescendantOf=function(a){a=k(a);for(var c=b.parentNode;null!=c;){if(c==a)return!0;c=c.parentNode}return a==b};b.destroy=function(){this.parentNode&&this.parentNode.removeChild(this)}}return b}
function C(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(c&&e[c]===b[c]||e===b)return!0}return!1}window.console||(window.console={log:function(){}});var y=function(a){var b=Object.prototype.toString,c=typeof a;if("object"==c){if(a){if(-1!==b.call(a).indexOf("HTML")&&-1!=b.call(a).indexOf("Element"))return"element";if(a instanceof Array||!(a instanceof Object)&&"[object Array]"==b.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";
if(!(a instanceof Object||"[object Function]"!=b.call(a)&&("undefined"==typeof a.call||"undefined"==typeof a.propertyIsEnumerable||a.propertyIsEnumerable("call"))))return"function"}return"null"}return"function"==c&&"undefined"==typeof a.call?"object":c},D=function(a){return"undefined"!==a},n=function(a){return!a||null===a},E=function(a){return n(a)||""==a||0==a.length},z=function(a){return!n(a)&&"array"==y(a)},m=function(a){return!n(a)&&"string"==typeof a},v=function(a){return!isNaN(a)&&"number"==
typeof Number(a)},F=function(a){return!n(a)&&"function"==y(a)},u=function(a){return!n(a)&&"element"==y(a)},p=function(a){return!n(a)&&"object"==typeof a},B={CLICK:"click",DBLCLICK:"dblclick",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",CONTEXTMENU:"contextmenu",KEYDOWN:"keydown",KEYUP:"keyup",KEYPRESS:"keypress",CHANGE:"change",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",
DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel"},l={listen:function(a,b,c){this.ignore(a,b,c);var d=m(a)?k(a):a;d&&(d.addEventListener?d.addEventListener(b,c,!1):d.attachEvent&&d.attachEvent("on"+b,function(){return c.call(d,window.event)}))},ignore:function(a,b,c){if(a=m(a)?k(a):a)if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)try{a.detachEvent("on"+b,c)}catch(d){}},getEvtTag:function(a){a=a||
window.event;(a=a.target||a.srcElement)&&3==a.nodeType&&(a=a.parentNode);return k(a)},onwheel:function(){},exit:function(a){a.cancelBubble=!0;a.returnValue=!1;a.stopPropagation&&(a.stopPropagation(),a.preventDefault());return!1}},G=function(a){var b=0,c=a||window.event;c.wheelDelta?b=c.wheelDelta/120:c.detail&&(b=-c.detail/3);if(b)l.onwheel(b);l.exit(a)};window.onload=function(){window.addEventListener&&window.addEventListener("DOMMouseScroll",G,!1);window.onmousewheel=document.onmousewheel=G};Object.create||
(Object.create=function(a){function b(){var b,e=1,f;for(b in a)if(a.hasOwnProperty(b)){f=c[e++];if("undefined"===typeof f)break;this[b]=f}}var c=arguments;b.prototype=a;return new b});String.prototype.encode=function(){return window.encodeURIComponent(this)};String.prototype.decode=function(){return window.decodeURIComponent(this.replace(/\+/g," "))};String.prototype.trim=function(){return this.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};String.prototype.truncate=function(a){var b=this.trim(),c=b,d="";
if(""==b||-1==b.indexOf(" ")||b.length<=a)return b;var b=b.substring(0,a),e=b.split(" ");1<e.length?(e.pop(),d+=e.join(" "),d.length<c.length&&(d+="...")):(b.substring(0,a-3),d+="...");return d};String.prototype.stripTags=function(){return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")};String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};String.prototype.unescapeHTML=function(){return this.strip().replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};String.prototype.replaceAll=function(a,b){return this.split(a).join(b)};String.prototype.upperfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var L=function(){var a=navigator.userAgent,b=a.toLowerCase(),c=0;window.attachEvent&&(-1<b.indexOf("trident/5.0")?c=9:null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(a)&&(c=parseFloat(RegExp.$1)));return{SWB:!!window.localStorage,Webkit:-1<b.indexOf("applewebkit"),Gecko:-1<b.indexOf("gecko")&&-1==
b.indexOf("khtml"),Chrome:-1<b.indexOf("applewebkit")&&-1<b.indexOf("chrome"),Safari:-1<b.indexOf("applewebkit")&&-1==b.indexOf("chrome"),Firefox:-1<b.indexOf("gecko")&&0<b.indexOf("firefox"),IE:!!window.attachEvent&&!window.opera,IEv:c,Opera:!!window.opera,Linux:-1!=b.indexOf("linux"),Win:-1!=b.indexOf("win"),Mac:-1!=b.indexOf("mac"),Unix:-1!=b.indexOf("x11")}}(),q="D, M d, Y  H:i:s A",H="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),I="January February March April May June July August September October November December".split(" "),
r=(new Date).getTimezoneOffset(),J={weeks:H,months:I,getTimeZone:function(){return r},setTimeZone:function(a){return r=a},getPattern:function(){return q},setPattern:function(a){return q=a},toRelativeTime:function(a){var b=a instanceof Date?a:new Date(a);a=new Date-b;b=parseInt(b,10);isNaN(b)&&(b=0);if(a<=b)return"Just now";var b=null,c={millisecond:1,second:1E3,minute:60,hour:60,day:24,month:30,year:12},d;for(d in c)if(a<c[d])break;else b=d,a/=c[d];a=Math.floor(a);1!==a&&(b+="s");return[a,b].join(" ")+
" ago"},make:function(a,b,c){var d=!1,e,f;b||(b=new Date,a=q);var g=function(a){return""+(10>a?"0"+a:a)},h=function(a){return a+=function(a){var b=" ";switch(a){case 1:b+="st";break;case 2:b+="nd";break;case 3:b+="rd";break;case 21:b+="st";break;case 22:b+="nd";break;case 23:b+="rd";break;case 31:b+="st";break;default:b+="th"}return b}};e=b instanceof Date?b:new Date(b);if(isNaN(e.getTime()))if(/^(\d+-\d+-\d+)\s(\d+:\d+:\d+)$/i.test(b))e=new Date(b.replace(" ","T"));else return b+" !";if(0<a.indexOf("a")||
0<a.indexOf("A"))d=!0;f={Y:function(){return e.getFullYear()},y:function(){return(f.Y()+"").slice(-2)},F:function(){return I[f.n()-1]},M:function(){return(f.F()+"").slice(0,3)},m:function(){return g(f.n())},n:function(){return e.getMonth()+1},S:function(){return h(f.j())},j:function(){return e.getDate()},d:function(){return g(f.j())},t:function(){return(new Date(f.Y(),f.n(),0)).getDate()},w:function(){return e.getDay()},l:function(){return H[f.w()]},D:function(){return(f.l()+"").slice(0,3)},G:function(){return e.getHours()},
g:function(){return f.G()%12||12},h:function(){return g(f.g())},H:function(){return d?f.h():g(f.G())},i:function(){return g(e.getMinutes())},s:function(){return g(e.getSeconds())},a:function(){return 11<f.G()?"pm":"am"},A:function(){return f.a().toUpperCase()}};return function(a){a=a.replace("....","&nbsp;");a=a.replace("..."," at ");a=a.replace(".."," on ");return a=a.replace("."," in ")}(a.replace(/\.*\\?([a-z])/gi,function(a,b){return f[a]?f[a]():b}))},gmtToLocal:function(a){a=new Date(a);a.setTime(a.getTime()+
r);return a.getTime()},localToGMT:function(a){a=new Date(a);a.setTime(a.getTime()-r);return a.getTime()},convert:function(a){return J.make(q,a)},validate:function(a,b,c){return 0<a&&13>a&&0<c&&32768>c&&0<b&&b<=(new Date(c,a,0)).getDate()}},w={round:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},addComma:function(a,b){try{if(a.match(/^\d+(\.?)\d+$/)){a+="";x=a.split(".");x1=x[0];x2=1<x.length?"."+x[1]:"";for(var c=/(\d+)(\d{3})/;c.test(x1);)x1=x1.replace(c,"$1"+(b?b:",")+"$2");return x1+
x2}}catch(d){return a}}},M=function(){var a={},b,c={setItem:function(b,c){a[b]=c},getItem:function(b){return a[b]||null},removeItem:function(b){a[b]&&(a[b]=null)},clear:function(){a={}}},d=function(a,c,d){try{var h=b;if(h)if("clear"==a)h.clear();else if("remove"==a)h.removeItem(c);else{if("get"==a)return h.getItem(c);if("set"==a){var s=c.trim(),k=d.trim();try{return h.setItem(s,k),1}catch(l){return l==QUOTA_EXCEEDDED_ERR?0:l==NOT_SUPPORTED_ERR?-1:-2}}}else console.log("Please select least one storage by using selectDB method!")}catch(m){console.log(m)}};
return{selectDB:function(a){"local"===a||2===a?b=window.localStorage||!1:"session"===a||1===a?b=window.sessionStorage||!1:a&&"context"!==a||(b=c)},closeDB:function(){b=null},set:function(a,b){var c=a.trim(),h=m(b)?b.trim():JSON.stringify(b);return d("set",c,h)},get:function(a,b){if(""!=a){var c=a.trim();if(c=d("get",c)){var h=JSON.parse(c);if("toJSON"===b)return h;if(F(b))b(h);else return c}return""}},remove:function(a){""!=a&&(a=a.trim(),""!=a&&d("remove",a))},clear:function(){d("clear")}}}(),N=
function(){var a=[],b=function(b){for(var c=0;c<a.length;c++)if(a[c].key==b)return a[c];return!1},c=function(b){for(var c=[],d=0;d<a.length;d++){var h=a[d];if(h&&h.key){var s=h.key.split("/");0<s.length&&s[0]==b&&c.push(h)}}return c},d=function(){var a=window.location.hash;if(a){var a=a.replace("#",""),b=a.split("/");0<b.length&&(a=c(b[0]))&&a.forEach(function(a){var c=a.route,d=1,e;for(e in c)c[e]=b[d]||"",d++;(0,a.callback)(c)})}};return{register:function(c,f){if(c){var g=c.split("/");if(1<g.length){0==
a.length&&(window.onhashchange=d);var h=b(c);h||(h={key:c,route:{},callback:f||function(){}},a.push(h));for(var k=1;k<g.length;k++)h.route[g[k]]=""}}},start:function(){d()}}}(),O=function(){var a=function(a,c,d){(a.events[c]||function(){})(d)};return{data:{},events:{},init:function(){},set:function(b,c){var d=this.get(b);d&&d==c||(this.data[b]=c,a(this,b,c),a(this,"all",this.data))},get:function(a){return this.data[a]||null},clear:function(){this.data={}},onchange:function(a,c){this.events[a]=c||
function(){}}}}(),K=window.bj=window.bellajs={register:function(a){a=a.split(".");for(var b=this,c=0;c<a.length;c++)b[a[c]]||(b[a[c]]={}),b=b[a[c]]},inherits:Object.create,copies:function(a,b,c,d){c=!1===c?!1:!0;d=d||[];for(var e in a)0<d.length&&d.contains(e)||!(!c||c&&b.hasOwnProperty(e))||(b[e]=a[e]);return b},clone:function(a){if(null==a||"object"!=typeof a)return a;if(a instanceof Date){var b=new Date;b.setTime(a.getTime());return b}if(a instanceof Array){b=[];a=a.slice(0);for(var c=0,d=a.length;c<
d;++c)b[c]=bj.clone(a[c]);return b}if(a instanceof Object){b={};for(c in a)"clone"!=c&&a.hasOwnProperty(c)&&(b[c]=bj.clone(a[c]));return b}return!1},extend:function(a,b){for(var c in a)b[c]=a[c];return b},unique:function(a){for(var b=[],c=0;c<a.length;c++)-1===b.indexOf(a[c])&&b.push(a[c]);return b},max:function(a){return Math.max.apply({},a)},min:function(a){return Math.min.apply({},a)},contains:C,msort:function(a,b,c){var d=c&&"asc"!==c?-1:1;a.sort(function(a,c){return a[b]>c[b]?d:a[b]<c[b]?-1*
d:0});return a},empty:function(a){for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0},compare:function(a,b){var c=!0,d;for(d in a)if("undefined"===typeof b[d]||b[d]!=a[d])c=!1;return c},getMousePosition:function(a){var b={x:0,y:0};a=a||window.event;if(a.pageX||a.pageY)b.x=a.pageX,b.y=a.pageY;else{var c=document.documentElement,d=document.body;b.x=a.clientX+(c.scrollLeft||d.scrollLeft)-(c.clientLeft||0);b.y=a.clientY+(c.scrollTop||d.scrollTop)-(c.clientTop||0)}return b},getWindowSize:function(){var a=
{w:0,h:0};window.innerWidth?(a.w=window.innerWidth,a.h=window.innerHeight):document.documentElement&&document.documentElement.clientWidth?(a.w=document.documentElement.clientWidth,a.h=document.documentElement.clientHeight):document.body&&(a.w=document.body.clientWidth,a.h=document.body.clientHeight);return a},query:t,all:function(a){return t(a)},one:function(a){return t(a,!0)},element:k,addElement:function(a,b){var c=b?bj.element(b):document.body,d=document.createElement(a);c.appendChild(d);return k(d)},
getElement:k,genid:A,createId:A,now:function(){return new Date},time:function(){return(new Date).getTime()},includeCSS:function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=a;c.media="screen";b.appendChild(c)},includeJS:function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";d.onload=d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==
d.readyState)&&b&&b()};d.src=a;c.appendChild(d)},listen:function(a,b,c){return l.listen(a,b,c)},ignore:function(a,b,c){return l.ignore(a,b,c)},getEvtTag:function(a){return l.getEvtTag(a)},exitEvent:function(a){return l.exit(a)},setOnwheelCallback:function(a){l.onwheel=a},setOnloadCallback:function(a){window.onload=a},setOnresizeCallback:function(a){window.onresize=a},setOnrehashCallback:function(a){window.onhashchange=a},setOnrestateCallback:function(a){window.onpopstate=a},userAgent:L,cookies:{set:function(a,
b,c){var d=new Date;b+="";d.setDate(d.getDate()+c?c:0);document.cookie=a+"="+(b?b.encode():"")+(c?"; expires="+d.toUTCString():"")+"; path=/;"},get:function(a,b){if(document.cookie){var c=document.cookie.split(";");if(!a){for(var d=[],e=0;e<c.length;e++){var f=c[e].trim(),f=f.split("="),g=f[0].trim();d.push({name:g,value:f[1].decode()})}b&&b(d);return d}d=a.trim();for(e=0;e<c.length;e++)if(f=c[e].trim(),f=f.split("="),g=f[0].trim(),g==d)return d=f[1].decode(),b&&b(d),d}return null},remove:function(a){this.set(a,
null,-1)}},date:J,number:w,transactor:{state:-1,xmlhttp:null,onchange:function(){},onerror:function(){},onabort:function(){},init:function(){try{var a=null;window.ActiveXObject?(a=new ActiveXObject("Msxml2.XMLHTTP"))||(a=new ActiveXObject("Microsoft.XMLHTTP")):window.XMLHttpRequest&&(a=new XMLHttpRequest)}catch(b){console.log("Cannot create XMLHTTP instance")}finally{this.xmlhttp=a}},send:function(a,b){this.init();if(this.xmlhttp){var c=this,d=b?b:function(){};try{if(this.xmlhttp.onreadystatechange=
function(){c.state=c.xmlhttp.readyState;c.onchange(c.state);if(4==c.state&&200==c.xmlhttp.status){var a=c.xmlhttp.responseText;try{var b=JSON.parse(a);b&&d(b)}catch(e){d(a)}c.xmlhttp=null}},m(a))this.xmlhttp.open("GET",a,!0),this.xmlhttp.send(null);else if(p(a)){var e=function(a){var b;if(m(a))b=a;else if(p(a)){b=[];for(var c in a)p(a[c])&&(a[c]=JSON.stringify(a[c])),b.push(c+"="+a[c]);b=b.join("&")}return b}(a.data);this.xmlhttp.open("POST",a.target,!0);this.xmlhttp.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded;");this.xmlhttp.send(e)}}catch(f){c.onerror(f),d(!1)}}},abort:function(){this.xmlhttp&&-1<this.state&&(this.xmlhttp.abort(),this.onabort())},create:function(){return bj.inherits(this)}},storage:M,Router:N,Template:{render:function(a,b){var c=b;if(p(a)||z(a))for(var d in a){var e=a[d];if(p(e)||z(e))for(var f in e){var g=f.toUpperCase(),h=e[f];m(h)&&(c=c.replaceAll(g,h))}}return c}},createModel:function(a){var b=bj.inherits(O);a&&(b=bj.extend(a,b),b.View={},b.init&&
b.init());return b},createView:function(a,b){var c={};if(a)c=bj.extend(b,c),c.Model=a,c.Model.View=c,c.init&&c.init();else throw Error("Model not be specified!");return c},isDef:D,isNull:n,isEmpty:E,isEND:function(a){return!a||E(a)||n(a)||!D(a)},isArray:z,isString:m,isNumber:v,isFunction:F,isElement:u,isObject:p}})();
